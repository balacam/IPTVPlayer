import{W as h}from"./index-D-eiEXcv.js";var a=function(f,e,n,t){function o(c){return c instanceof n?c:new n(function(i){i(c)})}return new(n||(n=Promise))(function(c,i){function s(r){try{u(t.next(r))}catch(l){i(l)}}function d(r){try{u(t.throw(r))}catch(l){i(l)}}function u(r){r.done?c(r.value):o(r.value).then(s,d)}u((t=t.apply(f,e||[])).next())})};class p extends h{constructor(){super({name:"Http",platforms:["web","electron"]})}getRequestHeader(e,n){const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,s,d)=>(i[s]=e[t[d]],i),{})[n.toLocaleLowerCase()]}nativeHeadersToObject(e){const n={};return e.forEach((t,o)=>{n[o]=t}),n}makeFetchOptions(e,n){const t=Object.assign({method:e.method||"GET",headers:e.headers},n||{}),o=this.getRequestHeader(e.headers||{},"content-type")||"";return o.indexOf("application/json")===0?t.body=JSON.stringify(e.data):o.indexOf("application/x-www-form-urlencoded")===0||o.indexOf("multipart/form-data"),t}request(e){return a(this,void 0,void 0,function*(){const n=this.makeFetchOptions(e,e.webFetchExtra),t=yield fetch(e.url,n),o=t.headers.get("content-type");let c;return o&&o.indexOf("application/json")===0?c=yield t.json():c=yield t.text(),{status:t.status,data:c,headers:this.nativeHeadersToObject(t.headers)}})}setCookie(e){return a(this,void 0,void 0,function*(){var n="";if(e.ageDays){const t=new Date;t.setTime(t.getTime()+e.ageDays*24*60*60*1e3),n="; expires="+t.toUTCString()}document.cookie=e.key+"="+(e.value||"")+n+"; path=/"})}getCookies(e){return a(this,void 0,void 0,function*(){if(!document.cookie)return{value:[]};var n=document.cookie.split(";");return{value:n.map(t=>{const i=t.split(";").map(u=>u.trim())[0].split("="),s=i[0],d=i[1];return{key:s,value:d}})}})}deleteCookie(e){return a(this,void 0,void 0,function*(){document.cookie=e.key+"=; Max-Age=0"})}clearCookies(e){return a(this,void 0,void 0,function*(){document.cookie.split(";").forEach(n=>document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`))})}uploadFile(e){return a(this,void 0,void 0,function*(){const n=this.makeFetchOptions(e,e.webFetchExtra),t=new FormData;return t.append(e.name,e.blob),yield fetch(e.url,Object.assign(Object.assign({},n),{body:t,method:"POST"})),{}})}downloadFile(e){return a(this,void 0,void 0,function*(){const n=this.makeFetchOptions(e,e.webFetchExtra);return{blob:yield(yield fetch(e.url,n)).blob()}})}}const y=new p;export{y as Http,p as HttpPluginWeb};
